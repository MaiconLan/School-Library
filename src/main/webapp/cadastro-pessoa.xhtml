<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
<head>
<title>School Library</title>
</head>
<body>
	<ui:composition template="/template/layout.xhtml">
		<ui:define name="conteudo">
			<h:form styleClass="cadastro-pessoa" id="pessoa">
				<p:growl id="messages" showDetail="true" />
				<center>
					<h5>Cadastro de Pessoa</h5>
				</center>
				<p:tabView>
					<p:tab title="Pessoa">
						<h:panelGrid id="grid" columns="4">
							<p:outputLabel value="Nome" />
							<p:inputText styleClass="input-field col s6" id="nome"
								placeholder="Nome" value="#{pessoaWebBean.pessoa.nome}" 
								required="true"
								requiredMessage="Nome é de preenchimento obrigatório" />

							<p:outputLabel value="Data de Nascimento" />
							<p:calendar id="nascimento"
								value="#{pessoaWebBean.pessoa.nascimento}" pattern="dd/MM/yyyy"
								mask="true" placeholder="Data de Nascimento" />

							<p:outputLabel value="Telefone" />
							<p:inputMask placeholder="Telefone" mask="(99) ?9 9999-9999"
								id="telefone" value="#{pessoaWebBean.pessoa.telefone}"
								required="false"
								requiredMessage="Telefone é de preenchimento obrigatório" />

							<p:outputLabel value="Endereço" />
							<p:inputText styleClass="input-field col s6" id="endereco"
								placeholder="Endereço" value="#{pessoaWebBean.pessoa.endereco}" />

							<p:outputLabel value="E-mail" />
							<p:inputText styleClass="validate" type="email" id="email"
								value="#{pessoaWebBean.pessoa.email}" placeholder="E-mail" />

							<p:outputLabel for="genero" value="Gênero" />
							<p:selectOneRadio id="genero"
								value="#{pessoaWebBean.pessoa.genero}">
								<f:selectItem itemLabel="Masculino" itemValue="M" />
								<f:selectItem itemLabel="Feminino" itemValue="F" />
							</p:selectOneRadio>

							<p:outputLabel value="Criar Login?" />

							<p:selectBooleanButton id="criarLoginBooleanButton"
								value="#{pessoaWebBean.isCriarLogin}" onLabel="Sim"
								offLabel="Não" onIcon="ui-icon-check" offIcon="ui-icon-close">
								<f:ajax execute="pessoa" render="pessoa" ></f:ajax>
							</p:selectBooleanButton>

						</h:panelGrid>
					</p:tab>
					<p:tab title="Login" rendered="#{pessoaWebBean.isCriarLogin}">
						<p:panelGrid columns="2">
							<p:outputLabel value="Usuário" />
							<p:inputText styleClass="input-field col s6" id="usuario"
								placeholder="Usuario"
								value="#{pessoaWebBean.pessoa.login.usuario}" />

							<p:outputLabel value="Senha" />
							<p:password styleClass="input-field col s6" id="senha"
								placeholder="Senha" value="#{pessoaWebBean.pessoa.login.senha}" />

							<p:outputLabel for="tipoLogin" value="Tipo Pessoa" />
							<p:selectOneRadio id="tipoLogin"
								value="#{pessoaWebBean.pessoa.login.tipoLogin}">
								<f:selectItem itemLabel="Aluno" itemValue="A" />
								<f:selectItem itemLabel="Colaborador" itemValue="C" />
							</p:selectOneRadio>
						</p:panelGrid>
					</p:tab>
				</p:tabView>
				<br />
				<p:commandButton value="Cadastrar"
					styleClass="waves-effect waves-light btn"
					actionListener="#{pessoaWebBean.salvar}" >
					<p:ajax update=":pessoa :pessoas" ></p:ajax>
					</p:commandButton>
			</h:form>

			<h:form styleClass="lista-pessoas" id="pessoas">
				<p:dataTable var="pes" value="#{pessoaWebBean.pessoas}">
					<f:facet name="header">
        Pessoas
    </f:facet>

					<p:column headerText="Id">
						<h:outputText value="#{pes.idPessoa}" />
					</p:column>

					<p:column headerText="Nome">
						<h:outputText value="#{pes.nome}" />
					</p:column>

					<p:column headerText="Telefone">
						<h:outputText value="#{pes.telefone}" />
					</p:column>

					<p:column headerText="Email">
						<h:outputText value="#{pes.email}" />
					</p:column>

					<p:column headerText="Email">
						<h:outputText value="#{pes.endereco}" />
					</p:column>

					<p:column headerText="Data Nascimento">
						<h:outputText value="#{pes.nascimento}" />
					</p:column>

					<p:column style="width:32px;text-align: center">
						<p:commandButton update=":pessoas :pessoa" icon="ui-icon-search"
							title="View">
							<f:setPropertyActionListener value="#{pes}"
								target="#{pessoaWebBean.pessoa}" />
						</p:commandButton>
					</p:column>

					<f:facet name="footer">
        Foram encontradas #{pessoaWebBean.pessoas.size()} pessoas.
    </f:facet>
				</p:dataTable>

			</h:form>
		</ui:define>
	</ui:composition>

</body>
</html>